<!DOCTYPE html>
<html>
<link rel="stylesheet" href="https://syaheed.github.io/css/mystyle.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css" rel="stylesheet" />
<body>

<p>How would you embed code snippets rom something you uploaded in Github into a HTML page?</p>
<p>Using the <a href="https://prismjs.com/">Prism.js</a> API with a clever bit of Javascript might do the trick!</p>  
<p>Let's make <a href="https://raw.githubusercontent.com/syaheed/syaheed.github.io/main/apps/githubEmbed/githubEmbed.html">this</a> a webpage that uses its own code as an example!</p> 
<p>A recursion joke and a practical guide all rolled into one. It's like code-ception!</p> 
<br>

<p>First we link to the stylesheet we want to use. In this case, there is the one I use for my pages, and one for prism.</p>
  <pre><code id="gist1" class="language-html"></code></pre>
  <!--if code is python, use class="language-python"-->
  <br>

<p>We then embed the objects that will be generated by the Javascript code. Note the "id"./p>
  <pre><code id="gist2" class="language-html"></code></pre>
  <br>

<p>And this is the Javascript code that goes within the HTML script tags. The function takes in the id, URL and start/end lines to extract the code from.</p>
  <pre><code id="gist3" class="language-html"></code></pre>
  <br>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
<!-- if code is python, add: <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-python.min.js"></script> -->
<script>
    async function fetchGitHubCode(elementId, url, startLine, endLine) {
      const response = await fetch(url);
      const data = await response.json();
      const decodedCode = atob(data.content);

      // Split the code into an array of lines
      const lines = decodedCode.split('\n');

      // Slice the array based on the given line numbers
      const selectedLines = lines.slice(startLine - 1, endLine).join('\n');

      document.getElementById(elementId).textContent = selectedLines;
      Prism.highlightAll();
    }

    // Call the function for each code block
    fetchGitHubCode('gist1', 'https://api.github.com/repos/syaheed/syaheed.github.io/contents/apps/githubEmbed/githubEmbed.html', 1, 6);
    fetchGitHubCode('gist2', 'https://api.github.com/repos/syaheed/syaheed.github.io/contents/apps/githubEmbed/githubEmbed.html', 7, 25);
    fetchGitHubCode('gist3', 'https://api.github.com/repos/syaheed/syaheed.github.io/contents/apps/githubEmbed/githubEmbed.html', 26, 51);

</script>
</body>
</html>